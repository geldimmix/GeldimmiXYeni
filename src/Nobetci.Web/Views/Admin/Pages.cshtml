@model List<Nobetci.Web.Data.Entities.ContentPage>
@{
    ViewData["Title"] = "Sayfalar";
    Layout = "_AdminLayout";
}

<div class="admin-header">
    <h2>
        <span>ğŸ“„</span>
        Sayfalar
    </h2>
    <div class="header-actions">
        <a href="/admin/pages/create" class="btn btn-primary">
            <span>â•</span>
            Yeni Sayfa
        </a>
    </div>
</div>

<div class="card" style="padding: 0; overflow: hidden;">
    <div style="overflow-x: auto;">
        <table class="table" style="margin: 0;">
            <thead>
                <tr>
                    <th style="padding-left: 20px;">BaÅŸlÄ±k</th>
                    <th>Slug</th>
                    <th style="text-align: center;">Dil</th>
                    <th style="text-align: center;">TÃ¼r</th>
                    <th style="text-align: center;">Durum</th>
                    <th>GÃ¼ncelleme</th>
                    <th style="text-align: center; padding-right: 20px;">Ä°ÅŸlemler</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Any())
                {
                    <tr>
                        <td colspan="7">
                            <div class="empty-state" style="padding: 60px 20px;">
                                <div class="icon">ğŸ“„</div>
                                <div class="title">HenÃ¼z sayfa eklenmemiÅŸ</div>
                                <a href="/admin/pages/create" class="btn btn-primary" style="margin-top: 16px;">
                                    <span>â•</span>
                                    Ä°lk SayfayÄ± OluÅŸtur
                                </a>
                            </div>
                        </td>
                    </tr>
                }
                @foreach (var p in Model)
                {
                    <tr>
                        <td style="padding-left: 20px;">
                            <div style="font-weight: 700; color: var(--text-primary);">@p.Title</div>
                            @if (!string.IsNullOrEmpty(p.MetaDescription))
                            {
                                <div class="truncate" style="font-size: 0.75rem; color: var(--text-muted); max-width: 300px; margin-top: 4px;">
                                    @p.MetaDescription
                                </div>
                            }
                        </td>
                        <td>
                            <code style="background: var(--bg-main); padding: 4px 10px; border-radius: var(--radius-sm); font-size: 0.8rem; font-family: 'SF Mono', Monaco, monospace;">
                                /@(p.Language == "tr" ? "rehber" : "guide")/@p.Slug
                            </code>
                        </td>
                        <td style="text-align: center;">
                            <span class="badge @(p.Language == "tr" ? "badge-info" : "badge-warning")">
                                @(p.Language == "tr" ? "ğŸ‡¹ğŸ‡·" : "ğŸ‡¬ğŸ‡§") @p.Language.ToUpper()
                            </span>
                        </td>
                        <td style="text-align: center;">
                            @switch (p.PageType)
                            {
                                case Nobetci.Web.Data.Entities.PageType.Landing:
                                    <span title="Landing">ğŸ </span>
                                    break;
                                case Nobetci.Web.Data.Entities.PageType.Feature:
                                    <span title="Ã–zellik">â­</span>
                                    break;
                                case Nobetci.Web.Data.Entities.PageType.Blog:
                                    <span title="Blog">ğŸ“</span>
                                    break;
                                case Nobetci.Web.Data.Entities.PageType.Legal:
                                    <span title="Yasal">ğŸ“œ</span>
                                    break;
                            }
                        </td>
                        <td style="text-align: center;">
                            @if (p.IsPublished)
                            {
                                <span class="badge badge-success">YayÄ±nda</span>
                            }
                            else
                            {
                                <span class="badge badge-danger">Taslak</span>
                            }
                        </td>
                        <td>
                            <div style="font-size: 0.85rem; font-weight: 500;">@p.UpdatedAt.ToString("dd.MM.yyyy")</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">@p.UpdatedAt.ToString("HH:mm")</div>
                        </td>
                        <td style="text-align: center; padding-right: 20px;">
                            <div style="display: flex; gap: 6px; justify-content: center;">
                                <a href="/admin/pages/edit/@p.Id" class="btn btn-secondary btn-sm">
                                    <span>âœï¸</span>
                                    DÃ¼zenle
                                </a>
                                <a href="/@(p.Language == "tr" ? "rehber" : "guide")/@p.Slug" target="_blank" class="btn btn-secondary btn-sm" title="Ã–nizle">
                                    ğŸ‘ï¸
                                </a>
                                <form method="post" action="/admin/pages/delete/@p.Id" style="display: inline;" onsubmit="return confirm('Bu sayfayÄ± silmek istediÄŸinize emin misiniz?')">
                                    <button type="submit" class="btn btn-danger btn-sm" title="Sil">
                                        ğŸ—‘ï¸
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
